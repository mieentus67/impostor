<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Impostor Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom right, #1e1e2f, #3a3a5c);
      color: white;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
    }
    .container {
      width: 100%;
      max-width: 480px;
      background: #2a2a40;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 25px rgba(0,0,0,0.4);
    }
    h1, h2 {
      text-align: center;
    }
    input, button, select {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border-radius: 10px;
      border: none;
      font-size: 16px;
    }
    button {
      background: #5c5cff;
      color: white;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover {
      background: #7a7aff;
    }
    .hidden {
      display: none;
    }
    .role-box {
      text-align: center;
      padding: 20px;
      background: #1f1f33;
      border-radius: 10px;
      margin-top: 20px;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Impostor Game</h1>

    <div id="step1">
      <h2>Ustawienia gry</h2>
      <label>Liczba graczy:</label>
      <input type="number" id="playerCount" min="3" max="20" />

      <label>Liczba impostorów:</label>
      <input type="number" id="impostorCount" min="1" max="5" />

      <button onclick="goToNames()">Dalej</button>
    </div>

    <div id="step2" class="hidden">
      <h2>Imiona graczy</h2>
      <div id="nameFields"></div>
      <button onclick="assignRoles()">Losuj role</button>
    </div>

    <div id="step3" class="hidden">
      <h2>Odkrywanie ról</h2>
      <div id="currentPlayer"></div>
      <button onclick="showRole()">Pokaż rolę</button>
      <div id="roleBox" class="role-box hidden"></div>
      <button id="nextPlayerBtn" class="hidden" onclick="nextPlayer()">Następny</button>
    </div>

    <div id="step4" class="hidden">
      <h2>Losowanie pierwszego gracza</h2>
      <div id="starter"></div>
      <button id="newRoundBtn" class="hidden" onclick="newRound()">Nowa runda</button>
    </div>
  </div>

  <script>
    let players = [];
    let impostors = [];
    let words = [
"samochód","dom","rower","pies","kot","jabłko","drzewo","książka","szkoła","stół",
"krzesło","telefon","okno","drzwi","komputer","kubek","buty","koszula","czapka","plecak",
"miasto","rzeka","morze","góra","las","deszcz","śnieg","słońce","kwiat","ogród",
"piłka","zegarek","torba","lampa","poduszka","łóżko","kanapa","kawa","herbata","samolot",
"pociąg","tramwaj","lód","ciasto","chleb","ser","masło","mleko","cukier","jajko",
"ryba","mięso","warzywo","owoc","okulary","długopis","zeszyt","papier","talerz","łyżka",
"widelec","nóż","butelka","szklanka","płyta","film","muzyka","piosenka","gra","zegar",
"mapa","aparat","słuchawki","kamera","łódka","samochodzik","balon","świeca","piórnik","kosz",
"kran","woda","ognisko","koc","piasek","kamień","ziemia","niebo","chmura","wiatr",
"ogień","park","ulica","droga","most","tunel","skateboard","kajak","rowerek","skarpeta",
"rękawiczka","koszyk","notes","guma","klej","farba","pędzel","puzzle","kostka","klocki",
"maskotka","lalka","klocki","tor","piłeczka","rakieta","butelka","słoik","paczka","torebka",
"szalik","kurtka","czapka","rękawiczki","okulary","portfel","zegarek","klucz","drzwi","okno",
"krzesło","stół","łóżko","sofa","szafa","komoda","regał","lampka","lampion","dywan",
"zasłona","firanka","poduszka","kołdra","koc","materac","lustro","obraz","zdjęcie","roślina",
"bukiet","kwiaty","trawa","krzew","drzewko","owocowiec","warzywo","jabłko","gruszka","pomarańcza",
"banan","winogrono","truskawka","malina","jagoda","czereśnia","wiśnia","brzoskwinia","śliwka","ananas",
"arbuz","melon","cytryna","limonka","kiwi","mango","kokos","pomidor","ogórek","marchew",
"cebula","czosnek","ziemniak","kapusta","brokuł","kalafior","papryka","cukinia","bakłażan","sałata",
"szpinak","rukola","fasola","groch","soczewica","ryż","makaron","chleb","bułka","bagietka",
"ciasto","ciastko","muffin","pączek","drożdżówka","sernik","makowiec","krem","mleko","jogurt",
"ser","masło","śmietana","jajko","mięso","kurczak","indyk","wołowina","wieprzowina","ryba",
"tuńczyk","łosoś","krewetka","homar","krab","ośmiornica","sardynka","makrela","kawa","herbata",
"sok","woda","napój","cola","lemoniada","piwo","wino","szampan","whisky","wódka",
"samolot","helikopter","balon","rower","hulajnoga","rolki","deskorolka","samochód","motocykl","autobus",
"tramwaj","pociąg","statek","łódź","kajak","kanu","taksówka","taxi","metro","kolej",
"most","tunel","droga","ulica","chodnik","park","plac","skwer","boisko","stadion",
"szkoła","przedszkole","uniwersytet","biblioteka","kino","teatr","muzeum","galeria","restauracja","kawiarnia",
"bar","hotel","hostel","lotnisko","dworzec","stacja","apteka","sklep","market","supermarket",
"poczta","bank","urzad","biblioteka","park","las","góra","rzeka","jezioro","morze",
"plaża","piasek","fale","ryby","łódka","kajak","surfing","żaglówka","statek","port",
"samolot","helikopter","balon","rakieta","kosmos","satelita","ziemia","księżyc","słońce","gwiazda",
"planeta","galaktyka","asteroid","kometa","meteoryt","mgławica","teleskop","lornetka","obserwatorium","astronauta",
"robot","dron","komputer","laptop","tablet","telefon","smartfon","drukarka","monitor","klawiatura",
"mysz","słuchawki","kamera","aparat","projektor","ekran","głośnik","mikrofon","lampka","zegarek",
"budzik","notatnik","długopis","ołówek","markery","farby","pędzle","papier","klej","nożyczki",
"taśma","guma","puzzle","klocki","maskotka","lalka","piłka","rakieta","skakanka","hula-hop",
"hulajnoga","rower","rolki","deskorolka","łyżwy","narty","snowboard","kajak","łódka","samochodzik",
"balon","lampion","torebka","plecak","portfel","klucz","okulary","szalik","kurtka","czapka"
];

    let civilianWord = words[Math.floor(Math.random() * words.length)];
    let currentIndex = 0;

    function goToNames() {
      let p = Number(document.getElementById("playerCount").value);
      let i = Number(document.getElementById("impostorCount").value);

      if (p < 3 || i < 1 || i >= p) return alert("Złe ustawienia");

      let fields = "";
      for (let x = 0; x < p; x++) {
        fields += `<input type='text' placeholder='Gracz ${x+1}' id='name${x}'>`;
      }

      document.getElementById("nameFields").innerHTML = fields;

      document.getElementById("step1").classList.add("hidden");
      document.getElementById("step2").classList.remove("hidden");
    }

    function assignRoles() {
      let p = Number(document.getElementById("playerCount").value);
      let i = Number(document.getElementById("impostorCount").value);

      players = [];
      for (let x = 0; x < p; x++) {
        let val = document.getElementById(`name${x}`).value;
        if (!val) return alert("Wpisz wszystkie imiona");
        players.push({ name: val, role: "cywil" });
      }

      let shuffled = [...players].sort(() => Math.random() - 0.5);
      impostors = shuffled.slice(0, i).map(p => p.name);

      players.forEach(p => {
        if (impostors.includes(p.name)) p.role = "impostor";
      });

      document.getElementById("step2").classList.add("hidden");
      document.getElementById("step3").classList.remove("hidden");

      showPlayerName();
    }

    function showPlayerName() {
      document.getElementById("currentPlayer").innerHTML =
        `<h3>Teraz telefon bierze: <br><b>${players[currentIndex].name}</b></h3>`;
    }

    function showRole() {
      let p = players[currentIndex];
      let box = document.getElementById("roleBox");

      if (p.role === "cywil") {
        box.innerHTML = `Jesteś CYWILEM<br><br>Twoje słowo: <b>${civilianWord}</b>`;
      } else {
        box.innerHTML = `Jesteś IMPOSTOREM<br><br>Inni impostorzy:<br><b>${impostors.filter(n => n !== p.name).join(", ") || "Brak"}</b>`;
      }

      box.classList.remove("hidden");
      document.getElementById("nextPlayerBtn").classList.remove("hidden");
    }

    function nextPlayer() {
      document.getElementById("roleBox").classList.add("hidden");
      document.getElementById("nextPlayerBtn").classList.add("hidden");

      currentIndex++;
      if (currentIndex >= players.length) return finishRoles();

      showPlayerName();
    }

    function finishRoles() {
      document.getElementById("step3").classList.add("hidden");
      document.getElementById("step4").classList.remove("hidden");

      pickStarter();

      document.getElementById("newRoundBtn").classList.remove("hidden");
    }

    function pickStarter() {
      let starter = players[Math.floor(Math.random() * players.length)].name;
      document.getElementById("starter").innerHTML = `<h2>Zaczyna: <b>${starter}</b></h2>`;
    }

    function newRound() {
      civilianWord = words[Math.floor(Math.random() * words.length)];

      let i = Number(document.getElementById("impostorCount").value);
      let shuffled = [...players].sort(() => Math.random() - 0.5);
      impostors = shuffled.slice(0, i).map(p => p.name);

      players.forEach(p => {
        if (impostors.includes(p.name)) p.role = "impostor";
        else p.role = "cywil";
      });

      currentIndex = 0;

      document.getElementById("step4").classList.add("hidden");
      document.getElementById("step3").classList.remove("hidden");
      document.getElementById("roleBox").classList.add("hidden");
      document.getElementById("nextPlayerBtn").classList.add("hidden");

      showPlayerName();
    }
  </script>
</body>
</html>
